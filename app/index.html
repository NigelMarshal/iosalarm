<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700' rel='stylesheet' type='text/css'>
  <title>ios Alarm App3</title>
  <meta name="keywords" content="ios, app3, Moustachio, gari, water, eba">
  <meta name="description" content="ios Alarm screens in HTML, CSS and JS">
  <link rel="stylesheet" href="temp/styles/styles.css">
  <script
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
  crossorigin="anonymous"></script>
</head>
<body>
  <header class="iphone-header">
      <ul class="iphone-header__connection-icons">
      <li class="icon-carrier_signal"></li>
      <li>CARRIER</li>
      <li class="icon-wifi_icon"></li>
      </ul>

      <ul class="iphone-header__status-icons">
      <li class="icon-bluetooth"></li>
      <li>60%</li>
      <li class="icon-battery"></li>
      </ul>
 
    <p id="iphone-header__time"></p>
  </header>


<div class="alarm-timings">
    
  

<div class="alarm-timings__time-row">
    <div class="alarm-timings__time-details">
           <p class="alarm-timings__alarm-time" id="alarmHours">5</p>
           <p class="alarm-timings__alarm-time">:</p>
          <p class="alarm-timings__alarm-time" id="alarmMinutes">00</p>
        <span class="alarm-timings__date-text">Weekend</span> 
    </div>

        <div class="alarm-timings__icon-wrapper">
      <a href="set-new-alarm.html">
      <p class="icon-settings"></p>
      </a>
    </div>

    <div class="alarm-timings__alarm-toggle">
      <input id="ios-switch-5" class="ios-switch" type="checkbox" checked >
      <label for="ios-switch-5" class="ios-switch-label"></label>
    </div>
      
  </div>

<a href="create-new-alarm.html" class="add-new__alarm">+</a>

<a id="alarmCheck" onClick='alarmSet()'></a>
<a id="alarmCheck" onClick='alarmSet2()'></a>
</div>




 <script type='text/javascript'>

var url = document.referrer;

function appendContent(){
  if (url === "http://localhost:3000/create-new-alarm.html"){
 $(".alarm-timings:last").append('<div class="alarm-timings__time-row"><div class="alarm-timings__time-details"><p class="alarm-timings__alarm-time" id="newAlarmHours"></p><p class="alarm-timings__alarm-time">:</p><p class="alarm-timings__alarm-time" id="newAlarmMinutes"></p><span class="alarm-timings__date-text">Weekend</span></div><div class="alarm-timings__icon-wrapper"><a href="set-new-alarm.html"><p class="icon-settings"></p></a></div><div class="alarm-timings__alarm-toggle"><input id="ios-switch-6" class="ios-switch" type="checkbox" checked ><label for="ios-switch-6" class="ios-switch-label"></label></div></div>');
}
 
else{
  console.log("Please enter values")
}
}

appendContent();


 </script>

<script type='text/javascript'>
   window.onload = function (){
        var hoursV = localStorage.getItem("StoreHours");
        var hoursV2 = localStorage.getItem("newStoreHours");
        var minutesV = localStorage.getItem("StoreMinutes");
        var minutesV2 = localStorage.getItem("newStoreMinutes");

        document.getElementById("alarmHours").innerHTML = hoursV;
         document.getElementById("newAlarmHours").innerHTML = hoursV2;
        document.getElementById("alarmMinutes").innerHTML = minutesV; 
        document.getElementById("newAlarmMinutes").innerHTML = minutesV2; 
      }

   $('.ios-switch').change(function(){
    if($(this).is(":checked")) {
        $(this).closest('.alarm-timings__time-row').addClass('active-row');
           $(this).closest('.alarm-timings__time-row').removeClass('disabled-row');
    } else {
        $(this).closest('.alarm-timings__time-row').addClass('disabled-row');
        $(this).closest('.alarm-timings__time-row').removeClass('active-row');
    }
});

   
//show time in header
var headerTime = document.getElementById('iphone-header__time');

// display current time
var currentTime = setInterval(function(){
  var date = new Date();
  var hours = date.getHours();
  var minutes = date.getMinutes();
  headerTime.textContent = (hours) + ":" + (minutes) + "";
},1000);



function alarmSet2() {
  var hr = document.getElementById('newAlarmHours');
  var min = document.getElementById('newAlarmMinutes');
  
  var selectedHour = localStorage.getItem("newStoreHours");
  var selectedMin = localStorage.getItem("newStoreMinutes")

var alarmTime = (selectedHour) + ":" + (selectedMin);
    console.log('alarmTime:' + alarmTime);
    document.getElementById('newAlarmHours').disabled = true;
  document.getElementById('newAlarmMinutes').disabled = true;

  var headerTime = document.getElementById('iphone-header__time');

/*function to calcutate the current time 
then compare it to the alarmtime 
*/

setInterval(function(){

  var date = new Date();
  var hours = date.getHours();
  var minutes = date.getMinutes();
  
  var currentTime = headerTime.textContent = (hours) + ":" + (minutes) + "";

  if (alarmTime == currentTime) {
    window.location = "alarm-ring.html";
    }
      else if (alarmTime == "null:null"){
      console.log("Cannot leave time as zero");
    }
    else{
      window.location = "index.html";
    }

},1000);

}

function alarmSet() {
  var hr = document.getElementById('alarmHours');
  var min = document.getElementById('alarmMinutes');
  
  var selectedHour = localStorage.getItem("StoreHours");
  var selectedMin = localStorage.getItem("StoreMinutes")

var alarmTime = (selectedHour) + ":" + (selectedMin);
    console.log('alarmTime:' + alarmTime);
    document.getElementById('alarmHours').disabled = true;
  document.getElementById('alarmMinutes').disabled = true;

  var headerTime = document.getElementById('iphone-header__time');

/*function to calcutate the current time 
then compare it to the alarmtime 
*/

setInterval(function(){

  var date = new Date();
  var hours = date.getHours();
  var minutes = date.getMinutes();
  
  var currentTime = headerTime.textContent = (hours) + ":" + (minutes) + "";

  if (alarmTime == currentTime && (!$("div").hasClass('disabled-row'))) {
    window.location = "alarm-ring.html";
    }

},1000);

}

setInterval(function () {document.getElementById("alarmCheck").click();}, 1000)
 </script>



</body>

 

   <!-- <script src="/temp/scripts/app-compiled.js"></script> -->
</html>